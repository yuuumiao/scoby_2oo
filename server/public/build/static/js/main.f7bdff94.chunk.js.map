{"version":3,"sources":["components/Auth/UserContext.jsx","api/apiHandler.js","components/Auth/UserProvider.jsx","components/Auth/withUser.jsx","components/NavMain.jsx","components/AppMap.jsx","components/Items/ItemDisplay.jsx","components/LocationAutoComplete.jsx","components/Untils/UploadWidget.jsx","components/Untils/index.js","components/SmallComponents/Message.jsx","components/Items/FormItem.jsx","pages/Home.jsx","components/Forms/FormSignin.jsx","pages/Signin.jsx","components/Forms/FormSignup.jsx","pages/Signup.jsx","components/ProtectedRoute.jsx","components/Items/CardItem.jsx","components/Forms/FormPhoneNumber.jsx","components/Items/FormItemEdit.jsx","pages/Profile.jsx","components/Forms/FormUser.jsx","App.jsx","index.js"],"names":["UserContext","React","createContext","service","axios","create","baseURL","process","withCredentials","errorHandler","error","response","data","console","log","userInfo","post","then","res","catch","get","patch","id","delete","UserProvider","state","user","isLoggedIn","isLoading","removeUser","apiHandler","setState","setUser","contextValue","this","Provider","value","props","children","Component","withUser","ComponentToExposeContextTo","Consumer","context","toggleFormDisplay","className","exact","to","Fragment","onClick","email","mapboxgl","workerClass","require","default","Map","ReactMapboxGl","accessToken","AppMap","lng","lat","zoom","handleClick","selectedItem","handleSelectItem","filterAndProductMarkersByCategroy","arg","Arg","slice","toUpperCase","toLowerCase","items","filter","item","category","map","p","location","coordinates","length","key","_id","src","alt","style","width","height","navigator","geolocation","getCurrentPosition","position","latitude","coords","longitude","plantsMarkers","kombuchaMarkers","vinegarMarkers","kefirMarkers","containerStyle","top","left","bottom","right","center","onViewportChange","PureComponent","handleClose","image","name","quantity","description","formattedAddress","id_user","profileImg","firstName","contact","LocationAutoComplete","handleReset","baseState","search","results","handleSearchChange","bind","e","target","clearTimeout","timeoutId","setTimeout","performSearch","features","place","place_name","onSelect","type","onChange","placeholder","defaultAddress","handleItemClicked","UploadWidget","forwardRef","ref","htmlFor","event","file","files","tempURL","URL","createObjectURL","onFileSelect","buildFormData","formData","parentKey","Date","File","append","Object","keys","forEach","Message","selectedClass","icon","rest","classes","danger","info","success","FormItem","address","httpResponse","imageRef","createRef","formRef","locationRef","handleChange","checked","handleFileSelect","temporaryURL","selectedFile","handleSubmit","preventDefault","fd","FormData","current","addItem","reset","status","message","err","handlePlace","geometry","onSubmit","defaultValue","disabled","marginTop","phoneNumber","Alert","variant","contextType","withRouter","Home","onSelectItem","displayForm","FormSignin","history","push","role","aria-label","autoComplete","Signin","FormSignup","lastName","password","Signup","ProtectedRoute","component","render","CardItem","handleDelete","handleEdit","addPhoneNumber","FormItemEdit","displayFormPhone","updateItem","defaultChecked","Profile","userItems","newItems","closeForm","updatedItemList","x","filtered","padding","fontSize","tmpUrl","App","path","historyProps","FormUser","ReactDOM","document","getElementById"],"mappings":"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","file":"static/js/main.f7bdff94.chunk.js","sourcesContent":["import React from \"react\";\n\nexport const UserContext = React.createContext();\n\nexport default UserContext;\n","import axios from \"axios\";\n\nconst service = axios.create({\n  baseURL: process.env.REACT_APP_BACKEND_URL,\n  withCredentials: true,\n  // Cookie is sent to client when using this service. (used for session)\n});\n\nfunction errorHandler(error) {\n  if (error.response.data) {\n    console.log(error.response && error.response.data);\n    throw error;\n  }\n  throw error;\n}\n\nexport default {\n  service,\n\n  signup(userInfo) {\n    return service\n      .post(\"/api/auth/signup\", userInfo)\n      .then((res) => res.data)\n      .catch(errorHandler);\n  },\n\n  signin(userInfo) {\n    return service\n      .post(\"/api/auth/signin\", userInfo)\n      .then((res) => res.data)\n      .catch(errorHandler);\n  },\n\n  isLoggedIn() {\n    return service\n      .get(\"/api/auth/isLoggedIn\")\n      .then((res) => res.data)\n      .catch(errorHandler);\n  },\n\n  logout() {\n    return service\n      .get(\"/api/auth/logout\")\n      .then((res) => res.data)\n      .catch(errorHandler);\n  },\n\n  getUserInfo() {\n    return service\n      .get(\"/api/users/me\")\n      .then((res) => res.data)\n      .catch(errorHandler);\n  },\n\n  updateUserInfos(data) {\n    return service\n      .patch(\"/api/users/me\", data)\n      .then((res) => res.data)\n      .catch(errorHandler);\n  },\n\n  getItems() {\n    return service\n      .get(\"/api/items\")\n      .then((res) => res.data)\n      .catch(errorHandler);\n  },\n\n  createItems(data) {\n    return service\n      .post(\"/api/items\", data)\n      .then((res) => res.data)\n      .catch(errorHandler);\n  },\n\n  updateItems(id, data) {\n    return service\n      .patch(`/api/items/${id}`, data)\n      .then((res) => res.data)\n      .catch(errorHandler);\n  },\n\n  deleteItem(id) {\n    return service\n      .delete(`/api/items/${id}`)\n      .then((res) => res.data)\n      .catch(errorHandler);\n  },\n};\n","import React from \"react\";\nimport UserContext from \"./UserContext\";\nimport apiHandler from \"../../api/apiHandler\";\n\nclass UserProvider extends React.Component {\n  state = {\n    user: null,\n    isLoggedIn: false,\n    isLoading: true,\n  };\n\n  componentDidMount() {\n    apiHandler\n      .isLoggedIn()\n      .then((data) => {\n        this.setState({ user: data, isLoggedIn: true, isLoading: false });\n      })\n      .catch((error) => {\n        this.setState({ isLoggedIn: false, isLoading: false });\n      });\n  }\n\n  removeUser = () => {\n    apiHandler.logout().then(() => {\n      this.setState({ user: null, isLoggedIn: false });\n    });\n  };\n\n  setUser = (userInfo) => {\n    this.setState({ user: userInfo, isLoggedIn: true });\n  };\n\n  render() {\n    const contextValue = {\n      user: this.state.user,\n      isLoggedIn: this.state.isLoggedIn,\n      isLoading: this.state.isLoading,\n      removeUser: this.removeUser,\n      setUser: this.setUser,\n    };\n\n    return (\n      <UserContext.Provider value={contextValue}>\n        {this.props.children}\n      </UserContext.Provider>\n    );\n  }\n}\n\nexport default UserProvider;\n","import React from \"react\";\nimport UserContext from \"./UserContext\";\n\n// This is what we call a HOC (Higher Order Component).\n// It takes a component as a parameter and it returns a component.\n// This technique can be used to abstract some logic in order to pass\n// some data down as props to the component sent as parameter.\n\n// The use case of this one is to make it easy to access the user context to\n// any component in our app.\n\n/********************************************************* */\n//  How to use:  =>\n// YourComponent.jsx\n// import React from \"react\"\n// function or class YourComponent()\n//\n// ... your implementation.\n//\n// export default withUser(YourComponent)\n// ----------------^ your component now has access to the user context defined in UserProvider.jsx.\n\n\nconst withUser = (ComponentToExposeContextTo) => (props) => {\n  return (\n    <UserContext.Consumer>\n      {(context) => <ComponentToExposeContextTo {...props} context={context} />}\n    </UserContext.Consumer>\n  );\n};\n\nexport default withUser;","import React from \"react\";\nimport { NavLink } from \"react-router-dom\";\nimport withUser from \"../components/Auth/withUser\";\nimport apiHandler from \"../api/apiHandler\";\nimport \"../styles/NavMain.css\";\n\nconst NavMain = (props) => {\n  const { toggleFormDisplay, context } = props;\n\n  function handleLogout() {\n    apiHandler\n      .logout()\n      .then(() => {\n        context.removeUser();\n      })\n      .catch((error) => {\n        console.log(error);\n      });\n  }\n\n  return (\n    <nav className=\"NavMain\">\n      <NavLink exact to=\"/\">\n        <h3 className=\"logo\">Scoby</h3>\n      </NavLink>\n      <ul className=\"nav-list\">\n        {context.isLoggedIn && (\n          <React.Fragment>\n            <li onClick={toggleFormDisplay}>Add item</li>\n            <li>\n              <NavLink to=\"/profile\">\n                {context.user && context.user.email}\n              </NavLink>\n            </li>\n            <li>\n              <p onClick={handleLogout}>Logout</p>\n            </li>\n          </React.Fragment>\n        )}\n        {!context.isLoggedIn && (\n          <React.Fragment>\n            <li>\n              <NavLink to=\"/signin\">Log in</NavLink>\n            </li>\n            <li>\n              <NavLink to=\"/signup\">Create account</NavLink>\n            </li>\n          </React.Fragment>\n        )}\n      </ul>\n    </nav>\n  );\n};\n\nexport default withUser(NavMain);\n","import React from \"react\";\nimport ReactMapboxGl, { Marker } from \"react-mapbox-gl\";\nimport mapboxgl from \"mapbox-gl\";\nimport \"mapbox-gl/dist/mapbox-gl.css\";\n\n// eslint-disable-next-line import/no-webpack-loader-syntax\n/* eslint import/no-webpack-loader-syntax: off */\nmapboxgl.workerClass =\n  require(\"worker-loader!mapbox-gl/dist/mapbox-gl-csp-worker\").default;\n\nconst Map = ReactMapboxGl({\n  accessToken: process.env.REACT_APP_MAPBOX_TOKEN,\n});\n\n// Programatically create image objects with js that we'll pass later to the layers.\n// The reason we need this is because the Layer component <images> prop takes as argument\n// an array with as first argument a key, an HTMLImageElement.\n// https://github.com/alex3165/react-mapbox-gl/blob/master/docs/API.md#layer\n// images: [imageKey: string, image: HTMLImageElement, options: object] Also accepts array of the previous image tuple.\n// Add images for use in layout with prop icon-image. The value should be the imageKey string of the tuple.\n// Alternatively, use mapbox studio to upload the image, it will be fetched with the map style object. (see map.addImage options for the tuple options).\n\nclass AppMap extends React.PureComponent {\n  state = {\n    lng: 2.349014, // Default lng and lat set to the center of paris.\n    lat: 48.864716,\n    zoom: 12, // used for map zoom level\n  };\n\n  componentDidMount() {\n    // Get users geo location and set it as the state so the map centers relative to the users current location. :)\n    const success = (position) => {\n      const latitude = position.coords.latitude;\n      const longitude = position.coords.longitude;\n      this.setState({ lat: latitude, lng: longitude });\n    };\n\n    const error = () => {\n      console.log(\"An error occured geolocating user\");\n    };\n\n    if (!navigator.geolocation) {\n      console.log(\"Geolocation not supported\");\n    } else {\n      navigator.geolocation.getCurrentPosition(success, error);\n    }\n  }\n\n  handleClick = (selectedItem) => {\n    this.props.handleSelectItem(selectedItem);\n  };\n\n  filterAndProductMarkersByCategroy = (arg) => {\n    const Arg = arg.slice(0, 1).toUpperCase() + arg.slice(1).toLowerCase();\n    return this.props.items\n      .filter((item) => item.category[0] === Arg)\n      .map((p) =>\n        p.location.coordinates.length === 2 ? (\n          <Marker\n            key={p._id}\n            onClick={() => this.handleClick(p)}\n            coordinates={p.location.coordinates}\n          >\n            <button>\n              <img\n                src={`/media/${arg}.svg`}\n                alt={`${arg}-marker`}\n                style={{ width: \"3vw\", height: \"auto\" }}\n              />\n            </button>\n          </Marker>\n        ) : null\n      );\n  };\n\n  render() {\n    const plantsMarkers = this.filterAndProductMarkersByCategroy(\"plant\");\n    const kombuchaMarkers = this.filterAndProductMarkersByCategroy(\"kombucha\");\n    const vinegarMarkers = this.filterAndProductMarkersByCategroy(\"vinegar\");\n    const kefirMarkers = this.filterAndProductMarkersByCategroy(\"kefir\");\n\n    return (\n      <Map\n        // eslint-disable-next-line\n        style=\"mapbox://styles/mapbox/light-v10\"\n        zoom={[12]}\n        containerStyle={{\n          top: 1,\n          left: 0,\n          bottom: 1,\n          right: 0,\n          height: \"100vh\",\n          width: \"100vw\",\n        }}\n        center={[this.state.lng, this.state.lat]}\n        onViewportChange={this.setState}\n      >\n        {plantsMarkers}\n        {kombuchaMarkers}\n        {vinegarMarkers}\n        {kefirMarkers}\n      </Map>\n    );\n  }\n}\n\nexport default AppMap;\n","import React from \"react\";\nimport \"../../styles/ItemDisplay.css\";\nimport withUser from \"../Auth/withUser\";\n\nconst ItemDisplay = (props) => {\n  const { item, handleClose } = props;\n  return (\n    <div className=\"Item-container\">\n      <p onClick={handleClose} className=\"close-link\">\n        X\n      </p>\n      <div className=\"round-image\">\n        <img className=\"user-img\" src={item.image} alt=\"item\" />\n      </div>\n      <h2 className=\"title\">{item.name}</h2>\n      <div className=\"info\">\n        <span>Quantity: {item.quantity}</span> | <span>{item.category}</span>\n      </div>\n      <p className=\"description\">{item.description}</p>\n      <p className=\"location\">{item.formattedAddress}</p>\n      <div className=\"user-info\">\n        <div className=\"round-image-user\">\n          <img src={item.id_user.profileImg} alt=\"user\" />\n        </div>\n        <span>Given away by {item.id_user.firstName}</span>\n      </div>\n      <div className=\"contact-information\">\n        Contact {item.id_user.firstName} at <b>{item.contact}</b>\n      </div>\n    </div>\n  );\n};\n\nexport default withUser(ItemDisplay);\n","import React, { Component } from \"react\";\nimport \"../styles/LocationAutoComplete.css\";\nimport axios from \"axios\";\n\nclass LocationAutoComplete extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      search: \"\",\n      results: [],\n      isLoading: false,\n    };\n    this.baseState = this.state;\n    this.handleSearchChange = this.handleSearchChange.bind(this);\n\n    if (!process.env.REACT_APP_MAPBOX_TOKEN) {\n      throw new Error(\n        \"You don't have any 'process.env.REACT_APP_MAPBOX_API_KEY'\"\n      );\n    }\n  }\n\n  handleReset = () => {\n    this.setState(this.baseState);\n  };\n\n  handleSearchChange(e) {\n    this.setState({\n      search: e.target.value,\n      isLoading: true,\n    });\n\n    // Stop the previous setTimeout if there is one in progress\n    clearTimeout(this.timeoutId);\n\n    // Launch a new request in 1000ms (1s) => Avoids excessive requests to the end point.\n    this.timeoutId = setTimeout(() => {\n      this.performSearch();\n    }, 1000);\n  }\n\n  performSearch() {\n    if (this.state.search === \"\") {\n      this.setState({\n        results: [],\n        isLoading: false,\n      });\n      return;\n    }\n\n    axios\n      .get(\n        `https://api.mapbox.com/geocoding/v5/mapbox.places/${this.state.search}.json?access_token=${process.env.REACT_APP_MAPBOX_TOKEN}`\n      )\n      .then((response) => {\n        // console.log(\"reponse\", response);\n        this.setState({\n          results: response.data.features,\n          isLoading: false,\n        });\n      });\n  }\n\n  handleItemClicked(place) {\n    this.setState({\n      search: place.place_name,\n      results: [],\n    });\n\n    this.props.onSelect(place);\n  }\n\n  render() {\n    return (\n      <div className=\"LocationAutoComplete\">\n        <input\n          className=\"input\"\n          type=\"text\"\n          value={this.state.search}\n          onChange={this.handleSearchChange}\n          placeholder={this.props.defaultAddress || \"Enter an address\"}\n        />\n        <ul className=\"LocationAutoComplete-results\">\n          {this.state.results.map((place) => (\n            <li\n              key={place.id}\n              className=\"LocationAutoComplete-items\"\n              onClick={() => this.handleItemClicked(place)}\n            >\n              {place.place_name}\n            </li>\n          ))}\n          {this.state.isLoading && (\n            <li className=\"LocationAutoComplete-items\">Loading...</li>\n          )}\n        </ul>\n      </div>\n    );\n  }\n}\n\nexport default LocationAutoComplete;\n","import React from \"react\";\nimport \"../../styles/UploadWidget.css\";\n\n// https://reactjs.org/docs/forwarding-refs.html\n\nconst UploadWidget = React.forwardRef((props, ref) => {\n  // In this component we foward the ref of the input type file in order to deal with it in the parent component.\n\n  const handleFileSelect = (event) => {\n    // This feature allows us to create a \"fake URL\" of the file that the user wants to upload\n    // In order to display the output to the user.\n    const file = event.target.files[0];\n    const tempURL = URL.createObjectURL(file);\n    props.onFileSelect && props.onFileSelect(tempURL);\n    // ^------------------------ You can use guard operators in your normal javascript too !\n    // This means that the prop onFileSelect isn't mandatory in order to use this component.\n  };\n\n  return (\n    <React.Fragment>\n      <label className=\"UploadWidget label\" htmlFor={props.name}>\n        {props.children}\n      </label>\n      <input\n        onChange={handleFileSelect}\n        ref={ref}\n        className=\"UploadWidget input\"\n        id={props.name}\n        name={props.name}\n        type=\"file\"\n      />\n    </React.Fragment>\n  );\n});\n\nexport default UploadWidget;\n","export function buildFormData(formData, data, parentKey) {\n  if (\n    data &&\n    typeof data === \"object\" &&\n    !(data instanceof Date) &&\n    !(data instanceof File)\n  ) {\n    Object.keys(data).forEach((key) => {\n      buildFormData(\n        formData,\n        data[key],\n        parentKey ? `${parentKey}[${key}]` : key\n      );\n    });\n  } else {\n    const value = data == null ? \"\" : data;\n    formData.append(parentKey, value);\n  }\n}\n","import React from \"react\";\n\nconst Message = ({ children, icon, ...rest }) => {\n  const classes = {\n    danger: \"danger\",\n    info: \"info\",\n    success: \"success\",\n  };\n\n  let selectedClass;\n  for (const key in rest) {\n    if (classes[key]) selectedClass = classes[key];\n  }\n\n  return (\n    <p className={`Message ${selectedClass}`}>\n      <img className=\"icon\" src={`/media/${icon}.svg`} alt={icon} />\n      {children}\n    </p>\n  );\n};\n\nexport default Message;\n","import React, { Component } from \"react\";\nimport LocationAutoComplete from \"../LocationAutoComplete\";\nimport \"../../styles/ItemForm.css\";\nimport apiHandler from \"../../api/apiHandler\";\nimport { withRouter } from \"react-router-dom\";\nimport UserContext from \"../Auth/UserContext\";\nimport UploadWidget from \"../Untils/UploadWidget\";\nimport { buildFormData } from \"../Untils/index\";\nimport Message from \"../SmallComponents/Message\";\nimport Alert from \"react-bootstrap/Alert\";\n\nclass FormItem extends Component {\n  state = {\n    name: \"\",\n    category: \"\",\n    quantity: \"\",\n    location: {\n      coordinates: [],\n    },\n    address: \"\",\n    description: \"\",\n    httpResponse: null,\n    error: null,\n  };\n\n  static contextType = UserContext;\n  imageRef = React.createRef(); //to upload the image\n  formRef = React.createRef(); //to reset the data in the form\n  locationRef = React.createRef(); //to reset the data in the form from the parent component\n\n  handleChange = (event) => {\n    const key = event.target.name;\n    const value =\n      event.target.type === \"checkbox\"\n        ? event.target.checked\n        : event.target.value;\n    this.setState({ [key]: value });\n    // if the state is arranged in a deeper level to access, setState like this\n    // this.setState({user: { ...this.state.user, [key]: value }});\n  };\n\n  handleFileSelect = (temporaryURL) => {\n    // Get the temporaryURL from the UploadWidget component and\n    // set the state so we can have a visual feedback on what the image will look like :)\n    this.setState({ selectedFile: temporaryURL });\n  };\n\n  handleSubmit = (event) => {\n    event.preventDefault();\n    // console.log(this.imageRef.current.files);\n    const fd = new FormData();\n    const { httpResponse, selectedFile, ...data } = this.state;\n    buildFormData(fd, data);\n    this.imageRef.current.files[0] &&\n      fd.append(\"image\", this.imageRef.current.files[0]);\n    // for (var value of fd.values()) {\n    //   console.log(\"-->\", value);\n    // } This is for check the data that submit in the form data before submitting\n\n    apiHandler\n      .createItems(fd)\n      .then((res) => {\n        this.props.addItem(res);\n        this.formRef.current.reset(); //uncontrolled form to reset\n        this.setState({\n          httpResponse: {\n            status: \"success\",\n            message: \"Item successfully added.\",\n          },\n          name: \"\",\n          category: \"\",\n          quantity: \"\",\n          location: {\n            coordinates: [],\n          },\n          address: \"\",\n          description: \"\",\n          selectedFile: \"\",\n          contact: null,\n        });\n        this.locationRef.current.handleReset(); //reset the state in the child component\n        this.timeoutId = setTimeout(() => {\n          this.setState({ httpResponse: null });\n        }, 10000);\n      })\n      .catch((err) => {\n        this.setState({\n          httpResponse: {\n            status: \"danger\",\n            message: \"An error occured, try again later.\",\n          },\n        });\n        this.timeoutId = setTimeout(() => {\n          this.setState({ httpResponse: null });\n        }, 10000);\n      });\n    // In order to send back the data to the client, since there is an input type file you have to send the\n    // data as formdata.\n    // The object that you'll be sending will maybe be a nested object, in order to handle nested objects in our form data\n    // Check out the stackoverflow solution below : )\n\n    // Nested object into formData by user Vladimir \"Vladi vlad\" Novopashin @stackoverflow : ) => https://stackoverflow.com/a/42483509\n  };\n\n  handlePlace = (place) => {\n    // This handle is passed as a callback to the autocomplete component.\n    // Take a look at the data and see what you can get from it.\n    // Look at the item model to know what you should retrieve and set as state.\n    // console.log(place);\n    //   this.setState({\n    //     user: {\n    //       ...this.state.user,\n    //       address: place.place_name,\n    //       location: place.geometry,\n    //     },\n    //   });\n    // }; //it worked for the nested arrangement, got modified after\n    this.setState({\n      address: place.place_name,\n      location: place.geometry,\n    });\n  };\n\n  render() {\n    const { httpResponse } = this.state;\n\n    return (\n      <div className=\"ItemForm-container\">\n        <form className=\"form\" onSubmit={this.handleSubmit} ref={this.formRef}>\n          <p onClick={this.props.handleClose} className=\"close-link\">\n            X\n          </p>\n          <h2 className=\"title\">Add Item</h2>\n\n          <div className=\"form-group\">\n            <label className=\"label\" htmlFor=\"name\">\n              Item name\n            </label>\n            <input\n              id=\"name\"\n              name=\"name\"\n              className=\"input\"\n              type=\"text\"\n              onChange={this.handleChange}\n              placeholder=\"What are you giving away ?\"\n            />\n          </div>\n\n          <div className=\"form-group\">\n            <label className=\"label\" htmlFor=\"category\">\n              Category\n            </label>\n\n            <select\n              id=\"category\"\n              defaultValue=\"-1\"\n              onChange={this.handleChange}\n              name=\"category\"\n            >\n              <option value=\"-1\" disabled>\n                Select a category\n              </option>\n              <option value=\"Plant\">Plant</option>\n              <option value=\"Kombucha\">Kombucha</option>\n              <option value=\"Vinegar\">Vinegar</option>\n              <option value=\"Kefir\">Kefir</option>\n            </select>\n          </div>\n\n          <div className=\"form-group\">\n            <label className=\"label\" htmlFor=\"quantity\">\n              Quantity\n            </label>\n            <input\n              className=\"input\"\n              id=\"quantity\"\n              name=\"quantity\"\n              type=\"number\"\n              onChange={this.handleChange}\n            />\n          </div>\n\n          <div className=\"form-group\">\n            <label className=\"label\" htmlFor=\"location\">\n              Address\n            </label>\n            <LocationAutoComplete\n              onSelect={this.handlePlace}\n              ref={this.locationRef}\n            />\n          </div>\n\n          <div className=\"form-group\">\n            <label className=\"label\" htmlFor=\"description\">\n              Description\n            </label>\n            <textarea\n              id=\"description\"\n              name=\"description\"\n              className=\"text-area\"\n              placeholder=\"Tell us something about this item\"\n              onChange={this.handleChange}\n            ></textarea>\n          </div>\n\n          <div className=\"form-group\">\n            <UploadWidget\n              ref={this.imageRef}\n              name=\"image\"\n              onFileSelect={this.handleFileSelect}\n              className=\"UploadWidget-control\"\n            >\n              Upload image\n            </UploadWidget>\n            {this.state.selectedFile ? (\n              <div className=\"upload-thumbnail-control uploaded\">\n                <img src={this.state.selectedFile} alt=\"selectedImage\" />\n              </div>\n            ) : (\n              <div className=\"upload-thumbnail-control empty\">\n                placeholder for the picture\n              </div>\n            )}\n          </div>\n\n          <h2 style={{ marginTop: \"5%\" }}>Contact information</h2>\n          <div className=\"form-group\">\n            <label className=\"label\" htmlFor=\"contact\">\n              How do you want to be reached?\n            </label>\n            <div>\n              <input\n                type=\"radio\"\n                name=\"contact\"\n                onChange={this.handleChange}\n                checked={this.state.contact === this.context.user.email}\n                value={this.context.user.email}\n              />\n              <label>{this.context.user.email}</label>\n            </div>\n            {this.context.user.phoneNumber && (\n              <div>\n                <input\n                  type=\"radio\"\n                  name=\"contact\"\n                  checked={this.state.contact === this.context.user.phoneNumber}\n                  onChange={this.handleChange}\n                  value={this.context.user.phoneNumber}\n                />\n                <label>{this.context.user.phoneNumber}</label>\n              </div>\n            )}\n          </div>\n\n          {!this.context.user.phoneNumber && (\n            <Message info icon=\"info\">\n              Want to be contacted by phone? Add your phone number in your\n              personal page.\n            </Message>\n          )}\n          {httpResponse && (\n            <Alert variant={httpResponse.status}>{httpResponse.message}</Alert>\n          )}\n\n          <button className=\"btn-submit\">Add Item</button>\n        </form>\n      </div>\n    );\n  }\n}\n\nexport default withRouter(FormItem);\n","import React from \"react\";\nimport AppMap from \"../components/AppMap\";\nimport ItemDisplay from \"../components/Items/ItemDisplay\";\nimport UserContext from \"../components/Auth/UserContext\";\nimport FormItem from \"../components/Items/FormItem\";\nimport apiHandler from \"../api/apiHandler\";\n\nclass Home extends React.Component {\n  static contextType = UserContext;\n  state = {\n    selectedItem: null,\n    items: [],\n  };\n\n  componentDidMount() {\n    apiHandler.getItems().then((data) => {\n      this.setState({ items: data });\n    });\n  }\n\n  addItem = (item) => {\n    this.setState({ items: [...this.state.items, item] });\n  };\n\n  onSelectItem = (selectedItem) => {\n    this.setState({ selectedItem: selectedItem });\n  };\n\n  handleClose = () => {\n    this.setState({ selectedItem: null });\n  };\n\n  render() {\n    const { user } = this.context;\n\n    return (\n      <div>\n        {user && this.props.displayForm && (\n          <FormItem\n            type=\"fromHome\"\n            handleClose={this.props.handleClose}\n            addItem={this.addItem}\n          />\n        )}\n        {this.state.selectedItem !== null && (\n          <ItemDisplay\n            item={this.state.selectedItem}\n            handleClose={this.handleClose}\n          />\n        )}\n        <AppMap items={this.state.items} handleSelectItem={this.onSelectItem} />\n      </div>\n    );\n  }\n}\n\nexport default Home;\n","import React, { Component } from \"react\";\nimport { Link } from \"react-router-dom\";\n//import { withUser } from \"../Auth/withUser\";\nimport { withRouter } from \"react-router-dom\";\nimport UserContext from \"../Auth/UserContext\";\nimport apiHandler from \"../../api/apiHandler\";\nimport \"../../styles/form.css\";\n\nclass FormSignin extends Component {\n  static contextType = UserContext;\n\n  state = {};\n\n  handleChange = (event) => {\n    const key = event.target.name;\n    const value =\n      event.target.type === \"file\"\n        ? event.target.files[0]\n        : event.target.type === \"checkbox\"\n        ? event.target.checked\n        : event.target.value;\n\n    this.setState({ [key]: value });\n  };\n\n  handleSubmit = (event) => {\n    event.preventDefault();\n\n    apiHandler\n      .signin(this.state)\n      .then((data) => {\n        this.context.setUser(data);\n        console.log(this.props);\n        this.props.history.push(\"/\");\n      })\n      .catch((error) => {\n        console.log(error);\n      });\n  };\n\n  render() {\n    // if (this.context.isLoggedIn) {\n    //   // This logic is the same as in the <ProtectedRoute /> component\n    //   // Here this is handled within the component, if there are some views\n    //   // that are not meant to be rendered to a logged in user,\n    //   // you could make a generic component out of it, just like <ProtectedRoute />\n    //   // and instead of checking if the user is not logged in, check if the user is logged in\n    //   // and redirect him to whatever page you want, in the case below: the home page.\n\n    //   return <Redirect to=\"/\" />;\n    // }\n    //console.log(this.props)\n\n    return (\n      <section className=\"form-section\">\n        <header className=\"header\">\n          <h1>\n            Welcome back{\" \"}\n            <span role=\"img\" aria-label=\"heart\">\n              \n            </span>\n          </h1>\n        </header>\n\n        <form\n          autoComplete=\"off\"\n          className=\"form\"\n          onChange={this.handleChange}\n          onSubmit={this.handleSubmit}\n        >\n          <h2 className=\"title\">Login</h2>\n\n          <div className=\"form-group\">\n            <label className=\"label\" htmlFor=\"email\">\n              Email\n            </label>\n            <input className=\"input\" id=\"email\" type=\"email\" name=\"email\" />\n          </div>\n\n          <div className=\"form-group\">\n            <label className=\"label\" htmlFor=\"password\">\n              Password\n            </label>\n            <input\n              className=\"input\"\n              id=\"password\"\n              type=\"password\"\n              name=\"password\"\n            />\n          </div>\n\n          <button className=\"btn-submit\">Let's go!</button>\n        </form>\n\n        <div className=\"form-section-bottom\">\n          <p>Already have an account? </p>\n          <Link className=\"link\" to=\"/signup\">\n            Register\n          </Link>\n        </div>\n      </section>\n    );\n  }\n}\n\nexport default withRouter(FormSignin);\n// Browser history and user will be given as props to the FormSignin thanks to HOCs !\n","import React from \"react\";\nimport FormSignin from \"../components/Forms/FormSignin\";\n\nconst Signin = (props) => {\n  return <FormSignin />;\n};\n\nexport default Signin;\n","import React, { Component } from \"react\";\nimport { Link, withRouter } from \"react-router-dom\";\n//import  withUser  from \"../Auth/withUser\";\nimport UserContext from \"../Auth/UserContext\";\nimport apiHandler from \"../../api/apiHandler\";\nimport \"../../styles/form.css\";\n\nclass FormSignup extends Component {\n  static contextType = UserContext;\n  state = {};\n\n  handleChange = (event) => {\n    const value =\n      event.target.type === \"file\" ? event.target.files[0] : event.target.value;\n    const key = event.target.name;\n    // console.log(\"key->\", key, \"value->\", value)\n    this.setState({ [key]: value });\n  };\n\n  handleSubmit = (event) => {\n    event.preventDefault();\n\n    apiHandler\n      .signup({\n        firstName: this.state.firstName,\n        lastName: this.state.lastName,\n        email: this.state.email,\n        password: this.state.password,\n      })\n      .then((data) => {\n        this.context.setUser(data);\n        this.props.history.push(\"/\");\n      })\n      .catch((error) => {\n        console.log(error);\n      });\n  };\n\n  render() {\n    // if (this.context.isLoggedIn) {\n    //   // This logic is the same as in the <ProtectedRoute /> component\n    //   // Here this is handled within the component, if there are some views\n    //   // that are not meant to be rendered to a logged in user,\n    //   // you could make a generic component out of it, just like <ProtectedRoute />\n    //   // and instead of checking if the user is not logged in, check if the user is logged in\n    //   // and redirect him to whatever page you want, in the case below: the home page.\n    //   return <Redirect to=\"/\" />;\n    // }\n\n    return (\n      <section className=\"form-section\">\n        <header className=\"header\">\n          <h1>\n            Hello\n            <span role=\"img\" aria-label=\"hand\">\n              \n            </span>\n          </h1>\n        </header>\n\n        <form autoComplete=\"off\" className=\"form\" onSubmit={this.handleSubmit}>\n          <h2 className=\"title\">Create account</h2>\n\n          <div className=\"form-group\">\n            <label className=\"label\" htmlFor=\"firstName\">\n              First name\n            </label>\n            <input\n              className=\"input\"\n              id=\"firstName\"\n              type=\"text\"\n              name=\"firstName\"\n              onChange={this.handleChange}\n            />\n          </div>\n\n          <div className=\"form-group\">\n            <label className=\"label\" htmlFor=\"lastName\">\n              Last Name\n            </label>\n            <input\n              className=\"input\"\n              id=\"lastName\"\n              type=\"text\"\n              name=\"lastName\"\n              onChange={this.handleChange}\n            />\n          </div>\n\n          <div className=\"form-group\">\n            <label className=\"label\" htmlFor=\"email\">\n              Email\n            </label>\n            <input\n              className=\"input\"\n              id=\"email\"\n              type=\"email\"\n              name=\"email\"\n              onChange={this.handleChange}\n            />\n          </div>\n\n          <div className=\"form-group\">\n            <label className=\"label\" htmlFor=\"password\">\n              Password\n            </label>\n            <input\n              className=\"input\"\n              id=\"password\"\n              type=\"password\"\n              name=\"password\"\n              onChange={this.handleChange}\n            />\n          </div>\n\n          <button className=\"btn-submit\">Let's go!</button>\n        </form>\n\n        <div className=\"form-section-bottom\">\n          <p>Already have an account? </p>\n          <Link className=\"link\" to=\"/signin\">\n            Log in\n          </Link>\n        </div>\n      </section>\n    );\n  }\n}\n\nexport default withRouter(FormSignup);\n","import React from \"react\";\nimport FormSignup from \"../components/Forms/FormSignup\";\n\nconst Signup = (props) => {\n  return <FormSignup />;\n};\n\nexport default Signup;\n","import React from \"react\";\nimport { Redirect, Route } from \"react-router-dom\";\nimport UserContext from \"./Auth/UserContext\";\n\nfunction ProtectedRoute({ component: Component, render, ...rest }) {\n  return (\n    <UserContext.Consumer>\n      {(context) => {\n        if (context.isLoading) {\n          return <div>Loading ...</div>;\n        }\n        if (context.isLoggedIn) {\n          return (\n            <React.Fragment>\n              {/* If render prop is used instead of the component prop when calling ProtectedRoute (emulates <Route/> render method.*/}\n              {render && <Route {...rest} render={render} />}\n              {!render && <Route {...rest} component={Component} />}\n            </React.Fragment>\n          );\n        } else {\n          return <Redirect to=\"/signin\" />;\n        }\n      }}\n    </UserContext.Consumer>\n  );\n}\n\nexport default ProtectedRoute;\n","import React from \"react\";\n\nconst CardItem = ({\n  name,\n  quantity,\n  description,\n  image,\n  handleDelete,\n  handleEdit,\n  id,\n}) => {\n  return (\n    <div className=\"CardItem\">\n      <div className=\"item\">\n        <div className=\"round-image\">\n          <img src={image} alt=\"item\" />\n        </div>\n        <div className=\"item-empty\">\n          <h2 className=\"description\">{name}</h2>\n          <h2 className=\"description\">Quantity: {quantity}</h2>\n          <p className=\"description\">{description}</p>\n          <div className=\"buttons\">\n            <span className=\"buttons\">\n              <button\n                className=\"btn-secondary\"\n                onClick={() => handleDelete(id)}\n              >\n                Delete\n              </button>\n            </span>\n            <span>\n              <button className=\"btn-primary\" onClick={() => handleEdit(id)}>\n                Edit\n              </button>\n            </span>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default CardItem;\n","import React from \"react\";\nimport withUser from \"../Auth/withUser\";\n\nfunction FormPhoneNumber(props) {\n  const { handleChange, addPhoneNumber, phoneNumber, context } = props;\n  return (\n    <div className=\"user-contact\">\n      <form className=\"form\" onSubmit={addPhoneNumber}>\n        <div className=\"form-group\">\n          <label className=\"label\" htmlFor=\"phoneNumber\">\n            Phone number\n          </label>\n          <input\n            className=\"input\"\n            id=\"phoneNumber\"\n            type=\"text\"\n            name=\"phoneNumber\"\n            placeholder=\"Add phone number\"\n            value={phoneNumber}\n            onChange={handleChange}\n          />\n        </div>\n        <button className=\"form__button\">\n          {context.user.phoneNumber\n            ? \"Change phone number\"\n            : \"Add phone number\"}\n        </button>\n      </form>\n    </div>\n  );\n}\n\nexport default withUser(FormPhoneNumber);\n","import React, { Component } from \"react\";\nimport LocationAutoComplete from \"../LocationAutoComplete\";\nimport \"../../styles/ItemForm.css\";\nimport apiHandler from \"../../api/apiHandler\";\nimport { withRouter } from \"react-router-dom\";\nimport UserContext from \"../Auth/UserContext\";\nimport UploadWidget from \"../Untils/UploadWidget\";\nimport { buildFormData } from \"../Untils/index\";\nimport FormPhoneNumber from \"../Forms/FormPhoneNumber\";\nimport Alert from \"react-bootstrap/Alert\";\n\nclass FormItemEdit extends Component {\n  state = {\n    httpResponse: null,\n    error: null,\n    displayFormPhone: false,\n  };\n\n  static contextType = UserContext;\n  imageRef = React.createRef();\n  // formRef = React.createRef();\n  // locationRef = React.createRef();\n\n  handleChange = (event) => {\n    const key = event.target.name;\n    const value =\n      event.target.type === \"checkbox\"\n        ? event.target.checked\n        : event.target.value;\n    this.setState({ [key]: value });\n  };\n\n  handleFileSelect = (temporaryURL) => {\n    this.setState({ selectedFile: temporaryURL });\n  };\n\n  handleSubmit = (event) => {\n    event.preventDefault();\n    const fd = new FormData();\n    const { httpResponse, error, selectedFile, ...data } = this.state;\n    buildFormData(fd, data);\n    // console.log(this.imageRef.current.files[0]);\n    this.imageRef.current.files[0] &&\n      fd.append(\"image\", this.imageRef.current.files[0]);\n\n    apiHandler\n      .updateItems(this.props.item._id, fd)\n      .then((res) => {\n        this.props.updateItem(res);\n        // this.formRef.current.reset();\n        this.setState({\n          httpResponse: {\n            status: \"success\",\n            message: \"Item successfully added.\",\n          },\n        });\n        // this.locationRef.current.handleReset(); //reset the state in the child component\n        this.timeoutId = setTimeout(() => {\n          this.setState({ httpResponse: null });\n        }, 2000);\n      })\n      .catch((err) => {\n        console.log(err);\n        this.setState({\n          httpResponse: {\n            status: \"danger\",\n            message: \"An error occured, try again later.\",\n          },\n        });\n        this.timeoutId = setTimeout(() => {\n          this.setState({ httpResponse: null });\n        }, 2000);\n      });\n  };\n\n  handlePlace = (place) => {\n    this.setState({\n      address: place.place_name,\n      location: place.geometry,\n    });\n  };\n\n  render() {\n    const { httpResponse } = this.state;\n    const { name, category, quantity, description, contact, address, image } =\n      this.props.item;\n\n    return (\n      <div className=\"ItemForm-container\">\n        <form className=\"form\" onSubmit={this.handleSubmit} ref={this.formRef}>\n          <p onClick={this.props.handleClose} className=\"close-link\">\n            X\n          </p>\n          <h2 className=\"title\">Edit Item</h2>\n\n          <div className=\"form-group\">\n            <label className=\"label\" htmlFor=\"name\">\n              Item name\n            </label>\n            <input\n              id=\"name\"\n              name=\"name\"\n              className=\"input\"\n              type=\"text\"\n              onChange={this.handleChange}\n              defaultValue={name}\n            />\n          </div>\n\n          <div className=\"form-group\">\n            <label className=\"label\" htmlFor=\"category\">\n              Category\n            </label>\n\n            <select\n              id=\"category\"\n              onChange={this.handleChange}\n              name=\"category\"\n              defaultValue={category[0]}\n            >\n              <option value=\"-1\" disabled>\n                Select a category\n              </option>\n              <option value=\"Plant\">Plant</option>\n              <option value=\"Kombucha\">Kombucha</option>\n              <option value=\"Vinegar\">Vinegar</option>\n              <option value=\"Kefir\">Kefir</option>\n            </select>\n          </div>\n\n          <div className=\"form-group\">\n            <label className=\"label\" htmlFor=\"quantity\">\n              Quantity\n            </label>\n            <input\n              className=\"input\"\n              id=\"quantity\"\n              name=\"quantity\"\n              type=\"number\"\n              onChange={this.handleChange}\n              defaultValue={quantity}\n            />\n          </div>\n\n          <div className=\"form-group\">\n            <label className=\"label\" htmlFor=\"location\">\n              Address\n            </label>\n            <LocationAutoComplete\n              onSelect={this.handlePlace}\n              ref={this.locationRef}\n              defaultAddress={address}\n            />\n          </div>\n\n          <div className=\"form-group\">\n            <label className=\"label\" htmlFor=\"description\">\n              Description\n            </label>\n            <textarea\n              id=\"description\"\n              name=\"description\"\n              className=\"text-area\"\n              placeholder=\"Tell us something about this item\"\n              onChange={this.handleChange}\n              defaultValue={description}\n            ></textarea>\n          </div>\n\n          <div\n            className=\"form-group\"\n            // style={{ display: \"flex\", justifyContent: \"space-between\" }}\n          >\n            <UploadWidget\n              ref={this.imageRef}\n              name=\"image\"\n              onFileSelect={this.handleFileSelect}\n              className=\"UploadWidget-control\"\n            >\n              Change a picture to upload\n            </UploadWidget>\n            <div className=\"upload-thumbnail-control uploaded\">\n              <p>Preview: current picture</p>\n              {this.state.selectedFile ? (\n                <img src={this.state.selectedFile} alt=\"selectedImage\" />\n              ) : (\n                <img src={image} alt=\"selectedImage\" />\n              )}\n            </div>\n          </div>\n\n          <h2 style={{ marginTop: \"5%\" }}>Contact information</h2>\n          <div className=\"form-group\">\n            <label className=\"label\" htmlFor=\"contact\">\n              How do you want to be reached?\n            </label>\n            <div>\n              <input\n                type=\"radio\"\n                name=\"contact\"\n                onChange={this.handleChange}\n                // checked={this.state.contact === this.context.user.email}\n                defaultChecked={contact === this.context.user.email}\n                value={this.context.user.email}\n              />\n              <label>{this.context.user.email}</label>\n            </div>\n            {this.context.user.phoneNumber && (\n              <div>\n                <input\n                  type=\"radio\"\n                  name=\"contact\"\n                  //   checked={this.state.contact === this.context.user.phoneNumber}\n                  defaultChecked={contact === this.context.user.phoneNumber}\n                  onChange={this.handleChange}\n                  value={this.context.user.phoneNumber}\n                />\n                <label>{this.context.user.phoneNumber}</label>\n              </div>\n            )}\n          </div>\n\n          {!this.context.user.phoneNumber && (\n            <Alert variant=\"info\">\n              Want to be contacted by phone?\n              <span\n                onClick={(e) => {\n                  e.preventDefault();\n                  this.setState({\n                    displayFormPhone: !this.state.displayFormPhone,\n                  });\n                }}\n              >\n                {!this.state.displayFormPhone ? \"Add now\" : \"Add later\"}\n              </span>\n              {this.state.displayFormPhone && (\n                <FormPhoneNumber\n                  handleChange={this.props.handleChange}\n                  addPhoneNumber={this.props.addPhoneNumber}\n                  phoneNumber={this.props.phoneNumber}\n                />\n              )}\n            </Alert>\n          )}\n          {httpResponse && (\n            <Alert variant={httpResponse.status}>{httpResponse.message}</Alert>\n          )}\n\n          <button className=\"btn-submit\">Update Item</button>\n        </form>\n      </div>\n    );\n  }\n}\n\nexport default withRouter(FormItemEdit);\n","import React, { Component } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport UserContext from \"../components/Auth/UserContext\";\nimport apiHandler from \"./../api/apiHandler\";\nimport CardItem from \"../components/Items/CardItem\";\nimport FormItem from \"../components/Items/FormItem\";\nimport FormItemEdit from \"../components/Items/FormItemEdit\";\nimport FormPhoneNumber from \"../components/Forms/FormPhoneNumber\";\nimport \"../styles/Profile.css\";\nimport \"../styles/CardItem.css\";\n\nclass Profile extends Component {\n  static contextType = UserContext;\n\n  state = {\n    phoneNumber: \"\",\n    httpResponse: null,\n    selectedItem: null,\n    userItems: [],\n    displayForm: false,\n  };\n\n  componentDidMount() {\n    apiHandler\n      .getItems()\n      .then((data) => {\n        const filtered = data.filter(\n          (e) => e.id_user._id === this.context.user._id\n        );\n        this.setState({\n          userItems: filtered,\n          phoneNumber: this.context.user.phoneNumber,\n        });\n      })\n      .catch((error) => console.log(error));\n  }\n\n  handleChange = (event) => {\n    this.setState({ phoneNumber: event.target.value });\n  };\n\n  addPhoneNumber = (event) => {\n    event.preventDefault();\n    apiHandler\n      .updateUserInfos({\n        phoneNumber: this.state.phoneNumber,\n      })\n      .then((data) => {\n        this.context.setUser(data);\n        this.setState({\n          httpResponse: { status: \"success\", message: \"Phone number added.\" },\n        });\n        this.timeoutId = setTimeout(() => {\n          this.setState({ httpResponse: null });\n        }, 1000);\n      })\n\n      .catch((error) => {\n        this.setState({\n          httpResponse: {\n            status: \"danger\",\n            message: \"An error occured, try again later\",\n          },\n        });\n        this.timeoutId = setTimeout(() => {\n          this.setState({ httpResponse: null });\n        }, 1000);\n      });\n  };\n\n  addItem = (item) => {\n    this.setState({ userItems: [...this.state.userItems, item] });\n  };\n\n  handleDelete = (id) => {\n    apiHandler.deleteItem(id);\n    const newItems = this.state.userItems.filter((item) => item._id !== id);\n    this.setState({ userItems: newItems });\n  };\n\n  closeForm = () => {\n    this.setState({ displayForm: false });\n  };\n\n  handleEdit = (id) => {\n    const selectedItem = [...this.state.userItems].filter(\n      (e) => e._id === id\n    )[0];\n    this.setState({ displayForm: true, selectedItem: selectedItem });\n  };\n\n  updateItem = (item) => {\n    const updatedItemList = [...this.state.userItems].map((x) =>\n      x._id === item._id ? item : x\n    );\n    this.setState({ userItems: updatedItemList, selectedItem: item });\n  };\n\n  render() {\n    const { user } = this.context;\n\n    return (\n      <div style={{ padding: \"100px\", fontSize: \"1.25rem\" }}>\n        {/* <pre>{JSON.stringify(this.props, null, 2)}</pre> */}\n\n        {/* <h2 style={{ fontSize: \"1.5rem\", marginBottom: \"10px\" }}>\n          This is profile, it's protected !\n        </h2>\n        <p>\n          Checkout the<b>ProtectedRoute</b> component in\n          <code>./components/ProtectRoute.jsx</code>\n        </p>\n        <a\n          style={{ color: \"dodgerblue\", fontWeight: \"bold\" }}\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n          href=\"https://reacttraining.com/react-router/web/example/auth-workflow\"\n        >\n          React router dom Demo of a protected route\n        </a> */}\n\n        {user && this.props.displayForm && (\n          <FormItem\n            handleClose={this.props.handleClose}\n            addItem={this.addItem}\n          />\n        )}\n\n        {this.state.selectedItem && this.state.displayForm && (\n          <FormItemEdit\n            handleClose={this.closeForm}\n            updateItem={this.updateItem}\n            item={this.state.selectedItem}\n            handleChange={this.handleChange}\n            addPhoneNumber={this.addPhoneNumber}\n            phoneNumber={this.state.phoneNumber}\n          />\n        )}\n\n        <section className=\"Profile\">\n          <div className=\"user-image round-image\">\n            <img src={user.profileImg} alt={user.firstName} />\n          </div>\n          <div className=\"user-presentation\">\n            <h2>\n              {user.firstName} {user.lastName}\n            </h2>\n            <Link className=\"link\" to=\"/profile/settings\">\n              Edit profile\n            </Link>\n          </div>\n\n          <FormPhoneNumber\n            handleChange={this.handleChange}\n            addPhoneNumber={this.addPhoneNumber}\n            phoneNumber={this.state.phoneNumber}\n          />\n\n          {this.state.userItems.length === 0 && (\n            <div className=\"CardItem\">\n              <div className=\"item-empty\">\n                <div className=\"round-image\">\n                  <img src=\"/media/personal-page-empty-state.svg\" alt=\"\" />\n                </div>\n                <p>You don't have any items contributing to the community</p>\n              </div>\n            </div>\n          )}\n\n          {this.state.userItems.length > 0 &&\n            this.state.userItems.map((item) => (\n              <CardItem\n                key={item._id}\n                name={item.name}\n                quantity={item.quantity}\n                description={item.description}\n                image={item.image}\n                id={item._id}\n                handleDelete={this.handleDelete}\n                handleEdit={this.handleEdit}\n              />\n            ))}\n        </section>\n      </div>\n    );\n  }\n}\n\nexport default Profile;\n","import React, { Component } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport apiHandler from \"../../api/apiHandler\";\n//import UserContext from \"../Auth/UserContext\";\nimport withUser from \"../Auth/withUser\";\n\nimport \"../../styles/form.css\";\n\nclass FormUser extends Component {\n  //static contextType = UserContext;\n  //if using the withUser HOF, then static... is no more needed to access the UserContext\n\n  state = {\n    user: null,\n    tmpUrl: \"\",\n    httpResponse: null,\n    isLoading: true,\n  };\n\n  imageRef = React.createRef();\n  //Refs are created using React.createRef() and attached to React elements via the ref attribute.\n\n  handleChange = (event) => {\n    const key = event.target.name;\n    const value =\n      event.target.type === \"file\"\n        ? event.target.files[0]\n        : event.target.type === \"checkbox\"\n        ? event.target.checked\n        : event.target.value;\n\n    this.setState({\n      user: { ...this.state.user, [key]: value },\n    });\n  };\n\n  handleSubmit = (event) => {\n    event.preventDefault();\n    const fd = new FormData();\n\n    for (const key in this.state.user) {\n      if (key === \"profileImg\") continue;\n      fd.append(key, this.state.user[key]);\n    }\n    // if (this.imageRef.current.files[0]) {\n    //     fd.append(\"profileImg\", this.imageRef.current.files[0]);\n    // }\n    //console.log(this.state.user)\n    apiHandler\n      .updateUserInfos(this.state.user)\n      .then((data) => {\n        //update the context\n        //console.log(data,this.props.context)\n        this.props.context.setUser(data);\n        this.setState({\n          httpResponse: {\n            status: \"success\",\n            message: \"Profile successfully updated.\",\n          },\n        });\n        this.timeoutId = setTimeout(() => {\n          this.setState({ httpResponse: null });\n        }, 2000);\n      })\n      .catch((error) => {\n        this.setState({\n          httpResponse: {\n            status: \"failure\",\n            message:\n              \"Something bad happened while updating your profile, try again later\",\n          },\n        });\n\n        this.timeoutId = setTimeout(() => {\n          this.setState({ httpResponse: null });\n        }, 2000);\n      });\n  };\n\n  componentDidMount() {\n    apiHandler\n      .getUserInfo()\n      .then((data) => {\n        console.log(\"data\", data);\n        this.setState({ user: data, isLoading: false });\n      })\n      .catch((error) => {\n        this.setState({\n          isLoading: false,\n          httpResponse: {\n            status: \"failure\",\n            message: \"Something bad happened, please try again later\",\n          },\n        });\n      });\n  }\n\n  render() {\n    //if there is no loading the return div will happen faster than the didMounted\n    //the state.user will return undefined\n    // eslint-disable-next-line\n    const { httpResponse } = this.state;\n    // console.log(this.state.httpResponse)\n    //it always return null ?? => why ?\n    // console.log(this.props)\n    if (this.state.isLoading) return <div>Loading...</div>;\n\n    return (\n      <div>\n        <form\n          className=\"form\"\n          onSubmit={this.handleSubmit}\n          onChange={this.handleChange}\n        >\n          <div className=\"FormUser__headings\">\n            <h2 className=\"title\">Edit profile</h2>\n            <h2>\n              <Link to=\"/profile\">X</Link>\n            </h2>\n          </div>\n\n          <div className=\"round-image user-image\">\n            <img\n              src={this.state.tmpUrl || this.state.user.profileImg}\n              alt={this.state.user.firstName}\n            />\n          </div>\n\n          {/* ref={this.imageRef} */}\n\n          <div className=\"form-group\">\n            <label className=\"label\" htmlFor=\"firstName\">\n              First name\n            </label>\n            <input\n              className=\"input\"\n              id=\"firstName\"\n              type=\"text\"\n              name=\"firstName\"\n              value={this.state.user.firstName}\n            />\n          </div>\n\n          <div className=\"form-group\">\n            <label className=\"label\" htmlFor=\"lastName\">\n              Last Name\n            </label>\n            <input\n              className=\"input\"\n              id=\"lastName\"\n              type=\"text\"\n              name=\"lastName\"\n              value={this.state.user.lastName}\n            />\n          </div>\n\n          <div className=\"form-group\">\n            <label className=\"label\" htmlFor=\"email\">\n              Email\n            </label>\n            <input\n              className=\"input\"\n              id=\"email\"\n              type=\"email\"\n              name=\"email\"\n              value={this.state.user.email}\n            />\n          </div>\n\n          <div className=\"form-group\">\n            <label className=\"label\" htmlFor=\"phoneNumber\">\n              Phone number:\n            </label>\n            <input\n              className=\"input\"\n              id=\"phoneNumber\"\n              type=\"phoneNumber\"\n              name=\"phoneNumber\"\n              value={this.state.user.phoneNumber}\n            />\n          </div>\n\n          <button className=\"btn-submit\">SAVE</button>\n        </form>\n      </div>\n    );\n  }\n}\n\nexport default withUser(FormUser);\n","import React, { Component } from \"react\";\nimport { Switch, Route } from \"react-router-dom\";\nimport NavMain from \"./components/NavMain\";\nimport Home from \"./pages/Home\";\nimport Signin from \"./pages/Signin\";\nimport Signup from \"./pages/Signup\";\nimport ProtectedRoute from \"./components/ProtectedRoute\";\nimport Profile from \"./pages/Profile\";\nimport FormItem from \"./components/Items/FormItem\";\nimport FormUser from \"./components/Forms/FormUser\";\nimport \"bootstrap/dist/css/bootstrap.min.css\";\n\nclass App extends Component {\n  state = {\n    displayForm: false,\n  };\n\n  toggleFormDisplay = () => {\n    this.setState({ displayForm: !this.state.displayForm });\n  };\n\n  handleClose = () => {\n    this.setState({ displayForm: false });\n  };\n\n  render() {\n    return (\n      <div className=\"App\">\n        <NavMain toggleFormDisplay={this.toggleFormDisplay} />\n        <Switch>\n          <Route\n            exact\n            path=\"/\"\n            render={(historyProps) => (\n              <Home\n                {...historyProps}\n                displayForm={this.state.displayForm}\n                handleClose={this.handleClose}\n              />\n            )}\n          />\n          <Route exact path=\"/signin\" component={Signin} />\n          <Route exact path=\"/signup\" component={Signup} />\n          <Route exact path=\"/item/create\" component={FormItem} />\n          <ProtectedRoute\n            exact\n            path=\"/profile\"\n            render={(historyProps) => (\n              <Profile\n                {...historyProps}\n                displayForm={this.state.displayForm}\n                handleClose={this.handleClose}\n              />\n            )}\n          />\n\n          <Route exact path=\"/profile/settings\" component={FormUser} />\n        </Switch>\n      </div>\n    );\n  }\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { BrowserRouter } from \"react-router-dom\";\nimport UserProvider from \"./components/Auth/UserProvider\";\nimport App from \"./App\";\n\nimport \"./styles/reset.css\";\nimport \"./styles/global.css\";\n\nReactDOM.render(\n  <BrowserRouter>\n    <UserProvider>\n      <App />\n    </UserProvider>\n  </BrowserRouter>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}