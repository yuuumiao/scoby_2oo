(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{109:function(e,t,a){},110:function(e,t,a){},111:function(e,t,a){},112:function(e,t,a){},113:function(e,t,a){},115:function(e,t,a){},116:function(e,t,a){},117:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(18),s=a.n(r),c=a(9),o=a(2),i=a(3),m=a(7),u=a(6),h=l.a.createContext(),d=a(26),p=a.n(d),f=p.a.create({baseURL:"https://scoby-mapapp.herokuapp.com",withCredentials:!0});function g(e){if(e.response.data)throw console.log(e.response&&e.response.data),e;throw e}var b=function(e){return f.post("/api/auth/signup",e).then((function(e){return e.data})).catch(g)},E=function(e){return f.post("/api/auth/signin",e).then((function(e){return e.data})).catch(g)},v=function(){return f.get("/api/auth/isLoggedIn").then((function(e){return e.data})).catch(g)},N=function(){return f.get("/api/auth/logout").then((function(e){return e.data})).catch(g)},y=function(){return f.get("/api/users/me").then((function(e){return e.data})).catch(g)},C=function(e){return f.patch("/api/users/me",e).then((function(e){return e.data})).catch(g)},S=function(){return f.get("/api/items").then((function(e){return e.data})).catch(g)},I=function(e){return f.post("/api/items",e).then((function(e){return e.data})).catch(g)},j=function(e,t){return f.patch("/api/items/".concat(e),t).then((function(e){return e.data})).catch(g)},F=function(e){return f.delete("/api/items/".concat(e)).then((function(e){return e.data})).catch(g)},k=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(e=t.call.apply(t,[this].concat(l))).state={user:null,isLoggedIn:!1,isLoading:!0},e.removeUser=function(){N().then((function(){e.setState({user:null,isLoggedIn:!1})}))},e.setUser=function(t){e.setState({user:t,isLoggedIn:!0})},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this;v().then((function(t){e.setState({user:t,isLoggedIn:!0,isLoading:!1})})).catch((function(t){e.setState({isLoggedIn:!1,isLoading:!1})}))}},{key:"render",value:function(){var e={user:this.state.user,isLoggedIn:this.state.isLoggedIn,isLoading:this.state.isLoading,removeUser:this.removeUser,setUser:this.setUser};return l.a.createElement(h.Provider,{value:e},this.props.children)}}]),a}(l.a.Component),O=a(8),x=function(e){return function(t){return l.a.createElement(h.Consumer,null,(function(a){return l.a.createElement(e,Object.assign({},t,{context:a}))}))}},R=(a(81),x((function(e){var t=e.toggleFormDisplay,a=e.context;return l.a.createElement("nav",{className:"NavMain"},l.a.createElement(c.c,{exact:!0,to:"/"},l.a.createElement("h3",{className:"logo"},"Scoby")),l.a.createElement("ul",{className:"nav-list"},a.isLoggedIn&&l.a.createElement(l.a.Fragment,null,l.a.createElement("li",{onClick:t},"Add item"),l.a.createElement("li",null,l.a.createElement(c.c,{to:"/profile"},a.user&&a.user.email)),l.a.createElement("li",null,l.a.createElement("p",{onClick:function(){N().then((function(){a.removeUser()})).catch((function(e){console.log(e)}))}},"Logout"))),!a.isLoggedIn&&l.a.createElement(l.a.Fragment,null,l.a.createElement("li",null,l.a.createElement(c.c,{to:"/signin"},"Log in")),l.a.createElement("li",null,l.a.createElement(c.c,{to:"/signup"},"Create account")))))}))),w=a(20),L=a(37),A=a(5),P=a.n(A);a(107);P.a.workerClass=a(108).default;var D=Object(L.b)({accessToken:"pk.eyJ1IjoieXV1dW1pYW8iLCJhIjoiY2tqc21yNjNiMTMzNDJ6ang1ZGVpZWszeiJ9.lpg_QQjktPXPiDyIp1brHw"}),U=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={lng:2.349014,lat:48.864716,zoom:12},e.handleClick=function(t){e.props.handleSelectItem(t)},e.filterAndProductMarkersByCategroy=function(t){var a=t.slice(0,1).toUpperCase()+t.slice(1).toLowerCase();return e.props.items.filter((function(e){return e.category[0]===a})).map((function(a){return 2===a.location.coordinates.length?l.a.createElement(L.a,{key:a._id,onClick:function(){return e.handleClick(a)},coordinates:a.location.coordinates},l.a.createElement("button",null,l.a.createElement("img",{src:"/media/".concat(t,".svg"),alt:"".concat(t,"-marker"),style:{width:"3vw",height:"auto"}}))):null}))},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this;navigator.geolocation?navigator.geolocation.getCurrentPosition((function(t){var a=t.coords.latitude,n=t.coords.longitude;e.setState({lat:a,lng:n})}),(function(){console.log("An error occured geolocating user")})):console.log("Geolocation not supported")}},{key:"render",value:function(){var e=this.filterAndProductMarkersByCategroy("plant"),t=this.filterAndProductMarkersByCategroy("kombucha"),a=this.filterAndProductMarkersByCategroy("vinegar"),n=this.filterAndProductMarkersByCategroy("kefir");return l.a.createElement(D,{style:"mapbox://styles/mapbox/light-v10",zoom:[12],containerStyle:{top:1,left:0,bottom:1,right:0,height:"100vh",width:"100vw"},center:[this.state.lng,this.state.lat],onViewportChange:this.setState},e,t,a,n)}}]),a}(l.a.PureComponent),T=(a(109),x((function(e){var t=e.item,a=e.handleClose,n=e.context;return l.a.createElement("div",{className:"Item-container"},l.a.createElement("p",{onClick:a,className:"close-link"},"X"),l.a.createElement("div",{className:"round-image"},l.a.createElement("img",{className:"user-img",src:t.image,alt:"item"})),l.a.createElement("h2",{className:"title"},t.name),l.a.createElement("div",{className:"info"},l.a.createElement("span",null,"Quantity: ",t.quantity)," |",l.a.createElement("span",null,t.category)),l.a.createElement("p",{className:"description"},t.description),l.a.createElement("p",{className:"location"},t.formattedAddress),l.a.createElement("div",{className:"user-info"},l.a.createElement("div",{className:"round-image-user"},l.a.createElement("img",{src:n.user.profileImg,alt:"user"})),l.a.createElement("span",null,"Given away by ",n.user.firstName)),l.a.createElement("div",{className:"contact-information"},"Contact ",n.user.firstName," at ",l.a.createElement("b",null,t.contact)))}))),_=a(17),M=a(13),q=a(25),V=(a(110),function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).handleReset=function(){n.setState(n.baseState)},n.state={search:"",results:[],isLoading:!1},n.baseState=n.state,n.handleSearchChange=n.handleSearchChange.bind(Object(q.a)(n)),n}return Object(i.a)(a,[{key:"handleSearchChange",value:function(e){var t=this;this.setState({search:e.target.value,isLoading:!0}),clearTimeout(this.timeoutId),this.timeoutId=setTimeout((function(){t.performSearch()}),1e3)}},{key:"performSearch",value:function(){var e=this;""!==this.state.search?p.a.get("https://api.mapbox.com/geocoding/v5/mapbox.places/".concat(this.state.search,".json?access_token=").concat("pk.eyJ1IjoieXV1dW1pYW8iLCJhIjoiY2tqc21yNjNiMTMzNDJ6ang1ZGVpZWszeiJ9.lpg_QQjktPXPiDyIp1brHw")).then((function(t){e.setState({results:t.data.features,isLoading:!1})})):this.setState({results:[],isLoading:!1})}},{key:"handleItemClicked",value:function(e){this.setState({search:e.place_name,results:[]}),this.props.onSelect(e)}},{key:"render",value:function(){var e=this;return l.a.createElement("div",{className:"LocationAutoComplete"},l.a.createElement("input",{className:"input",type:"text",value:this.state.search,onChange:this.handleSearchChange,placeholder:this.props.defaultAddress||"Enter an address"}),l.a.createElement("ul",{className:"LocationAutoComplete-results"},this.state.results.map((function(t){return l.a.createElement("li",{key:t.id,className:"LocationAutoComplete-items",onClick:function(){return e.handleItemClicked(t)}},t.place_name)})),this.state.isLoading&&l.a.createElement("li",{className:"LocationAutoComplete-items"},"Loading...")))}}]),a}(n.Component)),W=(a(56),a(111),l.a.forwardRef((function(e,t){return l.a.createElement(l.a.Fragment,null,l.a.createElement("label",{className:"UploadWidget label",htmlFor:e.name},e.children),l.a.createElement("input",{onChange:function(t){var a=t.target.files[0],n=URL.createObjectURL(a);e.onFileSelect&&e.onFileSelect(n)},ref:t,className:"UploadWidget input",id:e.name,name:e.name,type:"file"}))})));function J(e,t,a){if(!t||"object"!==typeof t||t instanceof Date||t instanceof File){var n=null==t?"":t;e.append(a,n)}else Object.keys(t).forEach((function(n){J(e,t[n],a?"".concat(a,"[").concat(n,"]"):n)}))}var K=function(e){var t,a=e.children,n=e.icon,r=Object(_.a)(e,["children","icon"]),s={danger:"danger",info:"info",success:"success"};for(var c in r)s[c]&&(t=s[c]);return l.a.createElement("p",{className:"Message ".concat(t)},l.a.createElement("img",{className:"icon",src:"/media/".concat(n,".svg"),alt:n}),a)},Q=a(22),X=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={name:"",category:"",quantity:"",location:{coordinates:[]},address:"",description:"",httpResponse:null,error:null},e.imageRef=l.a.createRef(),e.formRef=l.a.createRef(),e.locationRef=l.a.createRef(),e.handleChange=function(t){var a=t.target.name,n="checkbox"===t.target.type?t.target.checked:t.target.value;e.setState(Object(M.a)({},a,n))},e.handleFileSelect=function(t){e.setState({selectedFile:t})},e.handleSubmit=function(t){t.preventDefault();var a=new FormData,n=e.state;n.httpResponse,n.selectedFile;J(a,Object(_.a)(n,["httpResponse","selectedFile"])),e.imageRef.current.files[0]&&a.append("image",e.imageRef.current.files[0]),I(a).then((function(t){e.props.addItem(t),e.formRef.current.reset(),e.setState({httpResponse:{status:"success",message:"Item successfully added."},name:"",category:"",quantity:"",location:{coordinates:[]},address:"",description:"",selectedFile:"",contact:null}),e.locationRef.current.handleReset(),e.timeoutId=setTimeout((function(){e.setState({httpResponse:null})}),1e4)})).catch((function(t){e.setState({httpResponse:{status:"danger",message:"An error occured, try again later."}}),e.timeoutId=setTimeout((function(){e.setState({httpResponse:null})}),1e4)}))},e.handlePlace=function(t){e.setState({address:t.place_name,location:t.geometry})},e}return Object(i.a)(a,[{key:"render",value:function(){var e=this.state.httpResponse;return l.a.createElement("div",{className:"ItemForm-container"},l.a.createElement("form",{className:"form",onSubmit:this.handleSubmit,ref:this.formRef},l.a.createElement("p",{onClick:this.props.handleClose,className:"close-link"},"X"),l.a.createElement("h2",{className:"title"},"Add Item"),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{className:"label",htmlFor:"name"},"Item name"),l.a.createElement("input",{id:"name",name:"name",className:"input",type:"text",onChange:this.handleChange,placeholder:"What are you giving away ?"})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{className:"label",htmlFor:"category"},"Category"),l.a.createElement("select",{id:"category",defaultValue:"-1",onChange:this.handleChange,name:"category"},l.a.createElement("option",{value:"-1",disabled:!0},"Select a category"),l.a.createElement("option",{value:"Plant"},"Plant"),l.a.createElement("option",{value:"Kombucha"},"Kombucha"),l.a.createElement("option",{value:"Vinegar"},"Vinegar"),l.a.createElement("option",{value:"Kefir"},"Kefir"))),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{className:"label",htmlFor:"quantity"},"Quantity"),l.a.createElement("input",{className:"input",id:"quantity",name:"quantity",type:"number",onChange:this.handleChange})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{className:"label",htmlFor:"location"},"Address"),l.a.createElement(V,{onSelect:this.handlePlace,ref:this.locationRef})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{className:"label",htmlFor:"description"},"Description"),l.a.createElement("textarea",{id:"description",name:"description",className:"text-area",placeholder:"Tell us something about this item",onChange:this.handleChange})),l.a.createElement("div",{className:"form-group"},l.a.createElement(W,{ref:this.imageRef,name:"image",onFileSelect:this.handleFileSelect,className:"UploadWidget-control"},"Upload image"),this.state.selectedFile?l.a.createElement("div",{className:"upload-thumbnail-control uploaded"},l.a.createElement("img",{src:this.state.selectedFile,alt:"selectedImage"})):l.a.createElement("div",{className:"upload-thumbnail-control empty"},"placeholder for the picture")),l.a.createElement("h2",{style:{marginTop:"5%"}},"Contact information"),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{className:"label",htmlFor:"contact"},"How do you want to be reached?"),l.a.createElement("div",null,l.a.createElement("input",{type:"radio",name:"contact",onChange:this.handleChange,checked:this.state.contact===this.context.user.email,value:this.context.user.email}),l.a.createElement("label",null,this.context.user.email)),this.context.user.phoneNumber&&l.a.createElement("div",null,l.a.createElement("input",{type:"radio",name:"contact",checked:this.state.contact===this.context.user.phoneNumber,onChange:this.handleChange,value:this.context.user.phoneNumber}),l.a.createElement("label",null,this.context.user.phoneNumber))),!this.context.user.phoneNumber&&l.a.createElement(K,{info:!0,icon:"info"},"Want to be contacted by phone? Add your phone number in your personal page."),e&&l.a.createElement(Q.a,{variant:e.status},e.message),l.a.createElement("button",{className:"btn-submit"},"Add Item")))}}]),a}(n.Component);X.contextType=h;var z=Object(O.g)(X),B=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(e=t.call.apply(t,[this].concat(l))).state={selectedItem:null,items:[]},e.addItem=function(t){e.setState({items:[].concat(Object(w.a)(e.state.items),[t])})},e.onSelectItem=function(t){e.setState({selectedItem:t})},e.handleClose=function(){e.setState({selectedItem:null})},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this;S().then((function(t){e.setState({items:t})}))}},{key:"render",value:function(){var e=this.context.user;return l.a.createElement("div",null,e&&this.props.displayForm&&l.a.createElement(z,{type:"fromHome",handleClose:this.props.handleClose,addItem:this.addItem}),null!==this.state.selectedItem&&l.a.createElement(T,{item:this.state.selectedItem,handleClose:this.handleClose}),l.a.createElement(U,{items:this.state.items,handleSelectItem:this.onSelectItem}))}}]),a}(l.a.Component);B.contextType=h;var H=B,Y=(a(30),function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(e=t.call.apply(t,[this].concat(l))).state={},e.handleChange=function(t){var a=t.target.name,n="file"===t.target.type?t.target.files[0]:"checkbox"===t.target.type?t.target.checked:t.target.value;e.setState(Object(M.a)({},a,n))},e.handleSubmit=function(t){t.preventDefault(),E(e.state).then((function(t){e.context.setUser(t),console.log(e.props),e.props.history.push("/")})).catch((function(e){console.log(e)}))},e}return Object(i.a)(a,[{key:"render",value:function(){return l.a.createElement("section",{className:"form-section"},l.a.createElement("header",{className:"header"},l.a.createElement("h1",null,"Welcome back"," ",l.a.createElement("span",{role:"img","aria-label":"heart"},"\ud83d\udc99"))),l.a.createElement("form",{autoComplete:"off",className:"form",onChange:this.handleChange,onSubmit:this.handleSubmit},l.a.createElement("h2",{className:"title"},"Login"),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{className:"label",htmlFor:"email"},"Email"),l.a.createElement("input",{className:"input",id:"email",type:"email",name:"email"})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{className:"label",htmlFor:"password"},"Password"),l.a.createElement("input",{className:"input",id:"password",type:"password",name:"password"})),l.a.createElement("button",{className:"btn-submit"},"Let's go!")),l.a.createElement("div",{className:"form-section-bottom"},l.a.createElement("p",null,"Already have an account? "),l.a.createElement(c.b,{className:"link",to:"/signup"},"Register")))}}]),a}(n.Component));Y.contextType=h;var G=Object(O.g)(Y),Z=function(e){return l.a.createElement(G,null)},$=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(e=t.call.apply(t,[this].concat(l))).state={},e.handleChange=function(t){var a="file"===t.target.type?t.target.files[0]:t.target.value,n=t.target.name;e.setState(Object(M.a)({},n,a))},e.handleSubmit=function(t){t.preventDefault(),b({firstName:e.state.firstName,lastName:e.state.lastName,email:e.state.email,password:e.state.password}).then((function(t){e.context.setUser(t),e.props.history.push("/")})).catch((function(e){console.log(e)}))},e}return Object(i.a)(a,[{key:"render",value:function(){return l.a.createElement("section",{className:"form-section"},l.a.createElement("header",{className:"header"},l.a.createElement("h1",null,"Hello",l.a.createElement("span",{role:"img","aria-label":"hand"},"\ud83d\udc4b"))),l.a.createElement("form",{autoComplete:"off",className:"form",onSubmit:this.handleSubmit},l.a.createElement("h2",{className:"title"},"Create account"),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{className:"label",htmlFor:"firstName"},"First name"),l.a.createElement("input",{className:"input",id:"firstName",type:"text",name:"firstName",onChange:this.handleChange})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{className:"label",htmlFor:"lastName"},"Last Name"),l.a.createElement("input",{className:"input",id:"lastName",type:"text",name:"lastName",onChange:this.handleChange})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{className:"label",htmlFor:"email"},"Email"),l.a.createElement("input",{className:"input",id:"email",type:"email",name:"email",onChange:this.handleChange})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{className:"label",htmlFor:"password"},"Password"),l.a.createElement("input",{className:"input",id:"password",type:"password",name:"password",onChange:this.handleChange})),l.a.createElement("button",{className:"btn-submit"},"Let's go!")),l.a.createElement("div",{className:"form-section-bottom"},l.a.createElement("p",null,"Already have an account? "),l.a.createElement(c.b,{className:"link",to:"/signin"},"Log in")))}}]),a}(n.Component);$.contextType=h;var ee=Object(O.g)($),te=function(e){return l.a.createElement(ee,null)};var ae=function(e){var t=e.component,a=e.render,n=Object(_.a)(e,["component","render"]);return l.a.createElement(h.Consumer,null,(function(e){return e.isLoading?l.a.createElement("div",null,"Loading ..."):e.isLoggedIn?l.a.createElement(l.a.Fragment,null,a&&l.a.createElement(O.b,Object.assign({},n,{render:a})),!a&&l.a.createElement(O.b,Object.assign({},n,{component:t}))):l.a.createElement(O.a,{to:"/signin"})}))},ne=function(e){var t=e.name,a=e.quantity,n=e.description,r=e.image,s=e.handleDelete,c=e.handleEdit,o=e.id;return l.a.createElement("div",{className:"CardItem"},l.a.createElement("div",{className:"item"},l.a.createElement("div",{className:"round-image"},l.a.createElement("img",{src:r,alt:"item"})),l.a.createElement("div",{className:"item-empty"},l.a.createElement("h2",{className:"description"},t),l.a.createElement("h4",{className:"description"},"Quantity: ",a),l.a.createElement("p",{className:"description"},n),l.a.createElement("div",{className:"buttons"},l.a.createElement("span",{className:"buttons"},l.a.createElement("button",{className:"btn-secondary",onClick:function(){return s(o)}},"Delete")),l.a.createElement("span",null,l.a.createElement("button",{className:"btn-primary",onClick:function(){return c(o)}},"Edit"))))))};var le=x((function(e){var t=e.handleChange,a=e.addPhoneNumber,n=e.phoneNumber,r=e.context;return l.a.createElement("div",{className:"user-contact"},l.a.createElement("form",{className:"form",onSubmit:a},l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{className:"label",htmlFor:"phoneNumber"},"Phone number"),l.a.createElement("input",{className:"input",id:"phoneNumber",type:"text",name:"phoneNumber",placeholder:"Add phone number",value:n,onChange:t})),l.a.createElement("button",{className:"form__button"},r.user.phoneNumber?"Change phone number":"Add phone number")))})),re=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={httpResponse:null,error:null,displayFormPhone:!1},e.imageRef=l.a.createRef(),e.handleChange=function(t){var a=t.target.name,n="checkbox"===t.target.type?t.target.checked:t.target.value;e.setState(Object(M.a)({},a,n))},e.handleFileSelect=function(t){e.setState({selectedFile:t})},e.handleSubmit=function(t){t.preventDefault();var a=new FormData,n=e.state;n.httpResponse,n.error,n.selectedFile;J(a,Object(_.a)(n,["httpResponse","error","selectedFile"])),e.imageRef.current.files[0]&&a.append("image",e.imageRef.current.files[0]),j(e.props.item._id,a).then((function(t){e.props.updateItem(t),e.setState({httpResponse:{status:"success",message:"Item successfully added."}}),e.timeoutId=setTimeout((function(){e.setState({httpResponse:null})}),2e3)})).catch((function(t){console.log(t),e.setState({httpResponse:{status:"danger",message:"An error occured, try again later."}}),e.timeoutId=setTimeout((function(){e.setState({httpResponse:null})}),2e3)}))},e.handlePlace=function(t){e.setState({address:t.place_name,location:t.geometry})},e}return Object(i.a)(a,[{key:"render",value:function(){var e=this,t=this.state.httpResponse,a=this.props.item,n=a.name,r=a.category,s=a.quantity,c=a.description,o=a.contact,i=a.address,m=a.image;return l.a.createElement("div",{className:"ItemForm-container"},l.a.createElement("form",{className:"form",onSubmit:this.handleSubmit,ref:this.formRef},l.a.createElement("p",{onClick:this.props.handleClose,className:"close-link"},"X"),l.a.createElement("h2",{className:"title"},"Add Item"),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{className:"label",htmlFor:"name"},"Item name"),l.a.createElement("input",{id:"name",name:"name",className:"input",type:"text",onChange:this.handleChange,defaultValue:n})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{className:"label",htmlFor:"category"},"Category"),l.a.createElement("select",{id:"category",onChange:this.handleChange,name:"category",defaultValue:r[0]},l.a.createElement("option",{value:"-1",disabled:!0},"Select a category"),l.a.createElement("option",{value:"Plant"},"Plant"),l.a.createElement("option",{value:"Kombucha"},"Kombucha"),l.a.createElement("option",{value:"Vinegar"},"Vinegar"),l.a.createElement("option",{value:"Kefir"},"Kefir"))),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{className:"label",htmlFor:"quantity"},"Quantity"),l.a.createElement("input",{className:"input",id:"quantity",name:"quantity",type:"number",onChange:this.handleChange,defaultValue:s})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{className:"label",htmlFor:"location"},"Address"),l.a.createElement(V,{onSelect:this.handlePlace,ref:this.locationRef,defaultAddress:i})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{className:"label",htmlFor:"description"},"Description"),l.a.createElement("textarea",{id:"description",name:"description",className:"text-area",placeholder:"Tell us something about this item",onChange:this.handleChange,defaultValue:c})),l.a.createElement("div",{className:"form-group"},l.a.createElement(W,{ref:this.imageRef,name:"image",onFileSelect:this.handleFileSelect,className:"UploadWidget-control"},"Change a picture to upload"),l.a.createElement("div",{className:"upload-thumbnail-control uploaded"},l.a.createElement("p",null,"Preview: current picture"),this.state.selectedFile?l.a.createElement("img",{src:this.state.selectedFile,alt:"selectedImage"}):l.a.createElement("img",{src:m,alt:"selectedImage"}))),l.a.createElement("h2",{style:{marginTop:"5%"}},"Contact information"),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{className:"label",htmlFor:"contact"},"How do you want to be reached?"),l.a.createElement("div",null,l.a.createElement("input",{type:"radio",name:"contact",onChange:this.handleChange,defaultChecked:o===this.context.user.email,value:this.context.user.email}),l.a.createElement("label",null,this.context.user.email)),this.context.user.phoneNumber&&l.a.createElement("div",null,l.a.createElement("input",{type:"radio",name:"contact",defaultChecked:o===this.context.user.phoneNumber,onChange:this.handleChange,value:this.context.user.phoneNumber}),l.a.createElement("label",null,this.context.user.phoneNumber))),!this.context.user.phoneNumber&&l.a.createElement(Q.a,{variant:"info"},"Want to be contacted by phone?",l.a.createElement("span",{onClick:function(t){t.preventDefault(),e.setState({displayFormPhone:!e.state.displayFormPhone})}},this.state.displayFormPhone?"Add later":"Add now"),this.state.displayFormPhone&&l.a.createElement(le,{handleChange:this.props.handleChange,addPhoneNumber:this.props.addPhoneNumber,phoneNumber:this.props.phoneNumber})),t&&l.a.createElement(Q.a,{variant:t.status},t.message),l.a.createElement("button",{className:"btn-submit"},"Update Item")))}}]),a}(n.Component);re.contextType=h;var se=Object(O.g)(re),ce=(a(112),a(113),function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(e=t.call.apply(t,[this].concat(l))).state={phoneNumber:"",httpResponse:null,selectedItem:null,userItems:[],displayForm:!1},e.handleChange=function(t){e.setState({phoneNumber:t.target.value})},e.addPhoneNumber=function(t){t.preventDefault(),C({phoneNumber:e.state.phoneNumber}).then((function(t){e.context.setUser(t),e.setState({httpResponse:{status:"success",message:"Phone number added."}}),e.timeoutId=setTimeout((function(){e.setState({httpResponse:null})}),1e3)})).catch((function(t){e.setState({httpResponse:{status:"danger",message:"An error occured, try again later"}}),e.timeoutId=setTimeout((function(){e.setState({httpResponse:null})}),1e3)}))},e.addItem=function(t){e.setState({userItems:[].concat(Object(w.a)(e.state.userItems),[t])})},e.handleDelete=function(t){F(t);var a=e.state.userItems.filter((function(e){return e._id!==t}));e.setState({userItems:a})},e.closeForm=function(){e.setState({displayForm:!1})},e.handleEdit=function(t){var a=Object(w.a)(e.state.userItems).filter((function(e){return e._id===t}))[0];e.setState({displayForm:!0,selectedItem:a})},e.updateItem=function(t){var a=Object(w.a)(e.state.userItems).map((function(e){return e._id===t._id?t:e}));e.setState({userItems:a,selectedItem:t})},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this;S().then((function(t){e.setState({userItems:t,phoneNumber:e.context.user.phoneNumber})})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){var e=this,t=this.context.user;return l.a.createElement("div",{style:{padding:"100px",fontSize:"1.25rem"}},t&&this.props.displayForm&&l.a.createElement(z,{handleClose:this.props.handleClose,addItem:this.addItem}),this.state.selectedItem&&this.state.displayForm&&l.a.createElement(se,{handleClose:this.closeForm,updateItem:this.updateItem,item:this.state.selectedItem,handleChange:this.handleChange,addPhoneNumber:this.addPhoneNumber,phoneNumber:this.state.phoneNumber}),l.a.createElement("section",{className:"Profile"},l.a.createElement("div",{className:"user-image round-image"},l.a.createElement("img",{src:t.profileImg,alt:t.firstName})),l.a.createElement("div",{className:"user-presentation"},l.a.createElement("h2",null,t.firstName," ",t.lastName),l.a.createElement(c.b,{className:"link",to:"/profile/settings"},"Edit profile")),l.a.createElement(le,{handleChange:this.handleChange,addPhoneNumber:this.addPhoneNumber,phoneNumber:this.state.phoneNumber}),0===this.state.userItems.length&&l.a.createElement("div",{className:"CardItem"},l.a.createElement("div",{className:"item-empty"},l.a.createElement("div",{className:"round-image"},l.a.createElement("img",{src:"/media/personal-page-empty-state.svg",alt:""})),l.a.createElement("p",null,"You don't have any items"))),this.state.userItems.length>0&&this.state.userItems.map((function(t){return l.a.createElement(ne,{key:t._id,name:t.name,quantity:t.quantity,description:t.description,image:t.image,id:t._id,handleDelete:e.handleDelete,handleEdit:e.handleEdit})}))))}}]),a}(n.Component));ce.contextType=h;var oe=ce,ie=a(36),me=x(function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={user:null,tmpUrl:"",httpResponse:null,isLoading:!0},e.imageRef=l.a.createRef(),e.handleChange=function(t){var a=t.target.name,n="file"===t.target.type?t.target.files[0]:"checkbox"===t.target.type?t.target.checked:t.target.value;e.setState({user:Object(ie.a)(Object(ie.a)({},e.state.user),{},Object(M.a)({},a,n))})},e.handleSubmit=function(t){t.preventDefault();var a=new FormData;for(var n in e.state.user)"profileImg"!==n&&a.append(n,e.state.user[n]);C(e.state.user).then((function(t){e.props.context.setUser(t),e.setState({httpResponse:{status:"success",message:"Profile successfully updated."}}),e.timeoutId=setTimeout((function(){e.setState({httpResponse:null})}),2e3)})).catch((function(t){e.setState({httpResponse:{status:"failure",message:"Something bad happened while updating your profile, try again later"}}),e.timeoutId=setTimeout((function(){e.setState({httpResponse:null})}),2e3)}))},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this;y().then((function(t){console.log("data",t),e.setState({user:t,isLoading:!1})})).catch((function(t){e.setState({isLoading:!1,httpResponse:{status:"failure",message:"Something bad happened, please try again later"}})}))}},{key:"render",value:function(){this.state.httpResponse;return this.state.isLoading?l.a.createElement("div",null,"Loading..."):l.a.createElement("div",null,l.a.createElement("form",{className:"form",onSubmit:this.handleSubmit,onChange:this.handleChange},l.a.createElement("div",{className:"FormUser__headings"},l.a.createElement("h2",{className:"title"},"Edit profile"),l.a.createElement("h2",null,l.a.createElement(c.b,{to:"/profile"},"X"))),l.a.createElement("div",{className:"round-image user-image"},l.a.createElement("img",{src:this.state.tmpUrl||this.state.user.profileImg,alt:this.state.user.firstName})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{className:"label",htmlFor:"firstName"},"First name"),l.a.createElement("input",{className:"input",id:"firstName",type:"text",name:"firstName",value:this.state.user.firstName})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{className:"label",htmlFor:"lastName"},"Last Name"),l.a.createElement("input",{className:"input",id:"lastName",type:"text",name:"lastName",value:this.state.user.lastName})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{className:"label",htmlFor:"email"},"Email"),l.a.createElement("input",{className:"input",id:"email",type:"email",name:"email",value:this.state.user.email})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{className:"label",htmlFor:"phoneNumber"},"Phone number:"),l.a.createElement("input",{className:"input",id:"phoneNumber",type:"phoneNumber",name:"phoneNumber",value:this.state.user.phoneNumber})),l.a.createElement("button",{className:"btn-submit"},"SAVE")))}}]),a}(n.Component)),ue=(a(114),function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(e=t.call.apply(t,[this].concat(l))).state={displayForm:!1},e.toggleFormDisplay=function(){e.setState({displayForm:!e.state.displayForm})},e.handleClose=function(){e.setState({displayForm:!1})},e}return Object(i.a)(a,[{key:"render",value:function(){var e=this;return l.a.createElement("div",{className:"App"},l.a.createElement(R,{toggleFormDisplay:this.toggleFormDisplay}),l.a.createElement(O.d,null,l.a.createElement(O.b,{exact:!0,path:"/",render:function(t){return l.a.createElement(H,Object.assign({},t,{displayForm:e.state.displayForm,handleClose:e.handleClose}))}}),l.a.createElement(O.b,{exact:!0,path:"/signin",component:Z}),l.a.createElement(O.b,{exact:!0,path:"/signup",component:te}),l.a.createElement(O.b,{exact:!0,path:"/item/create",component:z}),l.a.createElement(ae,{exact:!0,path:"/profile",render:function(t){return l.a.createElement(oe,Object.assign({},t,{displayForm:e.state.displayForm,handleClose:e.handleClose}))}}),l.a.createElement(O.b,{exact:!0,path:"/profile/settings",component:me})))}}]),a}(n.Component));a(115),a(116);s.a.render(l.a.createElement(c.a,null,l.a.createElement(k,null,l.a.createElement(ue,null))),document.getElementById("root"))},30:function(e,t,a){},56:function(e,t,a){},58:function(e,t,a){e.exports=a(117)},81:function(e,t,a){}},[[58,1,2]]]);
//# sourceMappingURL=main.eab88926.chunk.js.map